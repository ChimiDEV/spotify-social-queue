(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{8878:function(n,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sessions/[sid]/wish",function(){return r(6123)}])},5604:function(n,e,r){"use strict";r.d(e,{Z:function(){return o}});var t=r(5893),i=r(7294),a=r(1163),s={"/wish":0,"/queue":1,"/poll":2};function o(){var n=(0,a.useRouter)(),e=(0,i.useState)(s[n.pathname]||0);e[0],e[1];return(0,t.jsx)("span",{})}},6123:function(n,e,r){"use strict";r.r(e),r.d(e,{__N_SSP:function(){return O},default:function(){return z}});var t=r(5666),i=r.n(t),a=r(5893),s=r(5604),o=r(6744),c=(0,o.zo)("div",{marginTop:"1vh",marginBottom:"60px",marginLeft:"2vw",marginRight:"2vw",maxWidth:"96vw",overflowX:"hidden"});function u(n){var e=n.children;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{children:e}),(0,a.jsx)(s.Z,{})]})}var d=r(7357),l=r(3660),h=r(6084),p=r(7294),f=r(7450),x=r(8239),v=r(2255),m=(0,x.Z)({palette:{primary:{main:"#24a148"},info:{main:"#24a148"},text:{primary:"#000000",secondary:"#21272a",disabled:"#c1c7cd"},action:{hover:"#c1c7cd"}}}),w=(0,o.zo)(d.Z,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)",width:"96vw",backgroundColor:"#f2f4f8",padding:"20px"}),j=(0,o.zo)(l.Z,{"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"Black"}});function g(n){var e,r=n.open,t=n.onClose,i=n.onChange,s=n.onSubmit;return(0,a.jsx)(f.Z,{open:r,children:(0,a.jsx)(w,{children:(0,a.jsxs)(v.Z,{theme:m,children:[(0,a.jsx)(j,{label:"Spotify URL",variant:"outlined",size:"small",placeholder:"Bitte f\xfcge den Spotify URL hier ein",fullWidth:!0,onChange:i,onKeyDown:(e=s,function(n){"Enter"===n.code&&e()})}),(0,a.jsxs)(d.Z,{sx:{marginTop:"15px"},children:[(0,a.jsx)(h.Z,{onClick:t,children:"Abbrechen"}),(0,a.jsx)(h.Z,{variant:"contained",onClick:s,children:"Ok"})]})]})})})}var b=r(1163),k=r(6242),Z=r(4267),C=r(5861),_=r(2023),y=function(n){var e=n.src;return(0,a.jsx)("div",{children:(0,a.jsx)("img",{src:e,alt:"Album Cover"})})};function S(n){var e=n.song,r=n.onWish;return(0,a.jsxs)(k.Z,{variant:"outlined",sx:{marginBottom:"15px",backgroundColor:"#343a3f",width:"350px"},children:[(0,a.jsxs)(Z.Z,{children:[(0,a.jsx)(y,{src:e.album.image}),(0,a.jsx)(C.Z,{variant:"h5",children:e.name}),(0,a.jsx)(C.Z,{children:e.artist}),e.features&&(0,a.jsx)(C.Z,{sx:{mb:1,color:"#a2a9b0"},children:e.features})]}),(0,a.jsx)(_.Z,{children:(0,a.jsx)(h.Z,{size:"small",onClick:function(){return r(e.id)},children:"W\xfcnschen"})})]})}function T(n,e,r,t,i,a,s){try{var o=n[a](s),c=o.value}catch(u){return void r(u)}o.done?e(c):Promise.resolve(c).then(t,i)}function W(n){return function(){var e=this,r=arguments;return new Promise((function(t,i){var a=n.apply(e,r);function s(n){T(a,t,i,s,o,"next",n)}function o(n){T(a,t,i,s,o,"throw",n)}s(void 0)}))}}var q=W(i().mark((function n(e,r){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=r.startsWith("https://open.spotify.com/track")?r.split("/").pop().split("?")[0]:r,n.next=3,fetch("/api/sessions/".concat(e,"?track_id=").concat(t),{method:"POST"});case 3:case"end":return n.stop()}}),n)}))),E=W(i().mark((function n(e,r){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/sessions/".concat(e,"/tracks?q=").concat(r));case 2:return t=n.sent,n.abrupt("return",t.json());case 4:case"end":return n.stop()}}),n)}))),O=!0;function z(){var n=(0,p.useState)(),e=n[0],r=n[1],t=(0,p.useState)(),s=t[0],o=t[1],c=(0,p.useState)(!1),f=c[0],x=c[1],v=(0,p.useState)([]),m=v[0],w=v[1],j=(0,b.useRouter)(),k=function(){o(""),x(!1)},Z=W(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Enter"===r.code){n.next=2;break}return n.abrupt("return");case 2:return n.t0=w,n.next=5,E(j.query.sid,e);case 5:n.t1=n.sent,(0,n.t0)(n.t1);case 7:case"end":return n.stop()}}),n)}))),C=W(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(navigator.clipboard){n.next=3;break}return x(!0),n.abrupt("return");case 3:return n.next=5,navigator.clipboard.readText();case 5:return e=n.sent,n.next=8,q(j.query.sid,e);case 8:case"end":return n.stop()}}),n)})));return(0,a.jsxs)(u,{children:[(0,a.jsx)(g,{onClose:k,onChange:function(n){return o(n.target.value)},onSubmit:W(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,q(j.query.sid,s);case 2:k();case 3:case"end":return n.stop()}}),n)}))),open:f}),(0,a.jsx)(d.Z,{sx:{paddingTop:"15px"},children:(0,a.jsx)(l.Z,{label:"Suche",variant:"outlined",size:"small",placeholder:"Suche nach deinem Wunschsong",fullWidth:!0,onChange:function(n){return r(n.target.value)},onKeyDown:Z})}),(0,a.jsxs)(d.Z,{sx:{marginTop:"15px"},children:[(0,a.jsx)(h.Z,{onClick:C,children:"Aus Zwischenablage"}),(0,a.jsx)(h.Z,{variant:"contained",onClick:W(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=w,n.next=3,E(j.query.sid,e);case 3:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 5:case"end":return n.stop()}}),n)}))),children:"Suchen"})]}),(0,a.jsx)(d.Z,{sx:{color:"white",marginTop:"20px"},children:m.map((function(n,e){return(0,a.jsx)(S,{song:n,onWish:function(n){return q(j.query.sid,n)}},e)}))})]})}}},function(n){n.O(0,[373,570,774,888,179],(function(){return e=8878,n(n.s=e);var e}));var e=n.O();_N_E=e}]);